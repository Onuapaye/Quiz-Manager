
package fr.fortress.quizmanager.services;

import java.util.List;

import javax.inject.Inject;

import org.hibernate.SessionFactory;
import org.hibernate.Transaction;

import fr.fortress.quizmanager.model.MCQChoice;
import fr.fortress.quizmanager.model.Question;


public class QuestionOperationsService {

	@Inject
	private MCQChoiceDAO mcqChoicedao;

	@Inject
	private QuestionDAO questiondao;

	@Inject
	private SessionFactory factory;

	// @Transactional
	// TODO check that in a further lecture
	public void deleteQuestion(Question question) {
		final Transaction transaction = factory.openSession().beginTransaction();
		final MCQChoice criteria = new MCQChoice();
		criteria.setQuestion(question);
		final List<MCQChoice> choicesList = mcqChoicedao.searchQuestion(criteria);
		for (final MCQChoice choice : choicesList) {
			mcqChoicedao.deleteQuestion(choice);
		}
		questiondao.deleteQuestion(question);
		transaction.commit();
	}

}
